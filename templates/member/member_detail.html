{% extends "base/index.html" %}
{% load static %}

{% block title %}
    <title>Member details</title>
{% endblock title %}

{% block corecss %}
    {% comment %} <link rel="stylesheet" href="{% static 'css/vertical_nav.css' %}"> {% endcomment %}
    <link rel="stylesheet" href="{% static 'css/member_detail.css' %}">
{% endblock corecss%}

{% block content%}

{% comment %} <div class="navbar1">
    <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</div> {% endcomment %}

    <a href="{% url 'member_savings' member.id %}">Savings</a>
    <a href="{% url 'take_loan' member.id %}"> Take loans</a>
    <a href="{% url 'member_loans' member.id %}">View loans</a>
    <a href="{% url 'add_fixed_deposit' member_id=member.id %}">fixed deposit</a>
    <a href="{% url 'add_fixed_deposit' member_id=member.id %}">Recurring Deposits</a>
    <a href="{% url 'update_member' member.id %}">update profile</a>
    <div class="container">
        <header>
            <h1>Member Details</h1>
        </header>

        <section class="member-info">
            <div class="profile-image">
                <img src="rupesh.jpg" alt="Profile">
            </div>
            <div class="personal-info">
                <h2>Personal Information</h2>
                <p><strong>Name:</strong> {{personal_info.first_name}} {{personal_info.middle_name}} {{personal_info.last_name}}</p>
                <p><strong>Member Code No:</strong> {{member.code}}</p>
                <p><strong>Phone:</strong> {{personal_info.phone_number}}</p>
                <p><strong>Email:</strong> email@gmail.com</p>
            </div>
        </section>

        <section class="savings">
            <h2>Savings Account</h2>
            <table>
                <thead>
                    <tr>
                        <th>Account No</th>
                        <th>Type</th>
                        <th>Balance</th>
                        <th>Date Opened</th>
                    </tr>
                </thead>
                <tbody>
                    {% if savings_accounts %}
                    {% for account in savings_accounts %}
                    <tr>
                        <td>{{ account.account_number }}</td>
                        <td>{{ account.account_type_display }}</td>
                        <td>{{ account.balance }}</td>
                        <td>{{ account.created_on|date:"Y/m/d"  }}</td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="4">No record found.</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </section>

        <section class="loans">
            <h2>Loans</h2>
            <table>
                <thead>
                    <tr>
                        <th>Loan No</th>
                        <th>Loan Type</th>
                        <th>Amount</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for loan in loans %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{loan.loan_type}}</td>
                        <td>{{loan.amount}}</td>
                        <td>{{loan.status}}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" style="text-align: center;">No records found</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
        <section class="other-details">
            <h2>Other Details</h2>
            <p><strong>Address:</strong> {{ member.addressInfo.current_tole }}, {{ member.addressInfo.current_municipality }}-{{ member.addressInfo.current_ward_no }}</p>
            <p><strong>Marital Status:</strong> {{ member.personalInfo.marital_status }}</p>
            <p><strong>Income: </strong> {{ member.incomeInfo.agriculture_income}} Agriculture (Yearly), {{ member.incomeInfo.animal_farming_income }} Livestock (yearly), {{ member.incomeInfo.business_income }} Business Income, {{ member.incomeInfo.abroad_employment_income}} Foreign Employement, {{ member.incomeInfo.wages_income}} Wages (daily), {{ member.incomeInfo.personal_job_income}} Job (monthly), {{ member.incomeInfo.pension }} Pension. (All prices are in Nepali Rupees) </p>
            <p><strong>Livestock:</strong> {{ member.livestockInfo.cows}} cows, {{ member.livestockInfo.buffalo}} Buffalo, {{ member.livestockInfo.goat}} Goat and {{ member.livestockInfo.sheep}} Sheep </p>
            <p><strong>Land:</strong> {{ member.landInfo.farming_land}} Farming Land (Dhur), {{member.landInfo.other_land }} Other Land (Dhur).</p>
        </section>
        

        <a href="{% url 'dashboard' %}">Go Back</a>
        <a href="{% url 'delete_member'  member.id %}">Delete</a>
    </div>
{% endblock %}

